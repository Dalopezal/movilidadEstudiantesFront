<aside [class.collapsed]="isCollapsed" class="sidebar fuente">
  <div class="sidebar-header">
    <img src="../../../assets/logo_ucm.png" alt="Logo UCM" class="sidebar-logo" />
  </div>
  <div class="sidebar-header">
    <img src="../../../assets/logo-mobility.png" alt="Logo Mobility" class="sidebar-logo2" />
  </div>

  <nav class="sidebar-nav">
    <!-- Inicio -->
    <a routerLink="/home"
       routerLinkActive="active"
       [routerLinkActiveOptions]="{ exact: true }"
       class="nav-link">
      <i class="fas fa-tachometer-alt"></i><span class="link-text">Inicio</span>
    </a>

    <!-- Currículo -->
    <a routerLink="/"
       routerLinkActive="active"
       [routerLinkActiveOptions]="{ exact: true }"
       class="nav-link">
      <i class="fas fa-globe-americas"></i><span class="link-text">Internacionalización del Currículo</span>
    </a>

    <!-- Cooperación -->
    <a routerLink="/"
       routerLinkActive="active"
       [routerLinkActiveOptions]="{ exact: true }"
       class="nav-link">
      <i class="fas fa-handshake"></i><span class="link-text">Cooperación</span>
    </a>

    <!-- Movilidad -->
    <div class="has-submenu">
      <a (click)="togglemovilidadMenu()" class="nav-link submenu-toggle" role="button"
         aria-haspopup="true" [attr.aria-expanded]="ismovilidadOpen">
        <i class="fas fa-plane"></i>
        <span class="link-text">Movilidad</span>
        <i class="fas fa-chevron-down submenu-icon" [class.rotate]="ismovilidadOpen"></i>
      </a>

      <div class="submenu" [class.open]="ismovilidadOpen">
        <!-- Opciones directas de movilidad -->
        <a routerLink="/dashboard" routerLinkActive="active" class="nav-link submenu-link">
          <i class="fas fa-dot-circle"></i><span class="link-text">Dashboard</span>
        </a>

        <!-- SUBGRUPO Maestros -->
        <div class="submenu-group">
          <span class="submenu-title">GENERAL</span>

          <!-- menú dinámico generado según permisos -->
          <a *ngFor="let m of maestros"
            [routerLink]="'/'+m.url"
            routerLinkActive="active"
            class="nav-link submenu-link">
            <i class="fas fa-dot-circle"></i>
            <span class="link-text">{{ m.nombre }}</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
  <div class="sidebar-user" (click)="toggleUserMenu()" [class.open]="isUserMenuOpen">
    <ng-container *ngIf="usuario?.foto && usuario.foto !== '' && usuario.foto !== 'null'; else userIcon">
      <img [src]="usuario?.foto" alt="Usuario" class="user-avatar" (error)="onImageError($event)" />
    </ng-container>
    <ng-template #userIcon>
      <i class="fas fa-user-circle user-icon"></i>
    </ng-template>
    <div class="user-info">
      <strong style="font-size: 13.5px;">{{ decodeUtf8(usuario?.nombre) }}</strong>
      <small>{{ usuario?.correo }}</small>
      <small>{{ usuario?.rol }}</small>
    </div>
    <i class="fas fa-chevron-down user-chevron" [class.rotate]="isUserMenuOpen"></i>
    <div class="user-submenu" *ngIf="isUserMenuOpen">
      <a routerLink="/login"
         routerLinkActive="active"
         [routerLinkActiveOptions]="{ exact: true }"
         (click)="logout()"
         class="submenu-link">
        <i class="fa fa-sign-out-alt"></i> Salir
      </a>
    </div>
  </div>
</aside>

<br><br><br>
